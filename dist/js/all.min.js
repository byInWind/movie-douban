angular.module("app",["ui.router","route","service","in_theaters","search","comming_soon","top"]).controller("navCtrl",["$scope","$location",function(t,e){t.search=function(){e.path("/search/1/"+t.searchInfo),t.searchInfo=""}}]),angular.module("route",[]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state({url:"/in_theaters/:page",templateUrl:"./view/in_theaters/in_theaters.html",name:"in_theaters",controller:"in_theatersCtrl"}).state({url:"/search/:page/:searchInfo",templateUrl:"./view/search/search.html",name:"search",controller:"searchCtrl"}).state({url:"/comming_soon/:page",templateUrl:"./view/comming_soon/comming_soon.html",name:"comming_soon",controller:"comming_soonCtrl"}).state({url:"/top/:page",templateUrl:"./view/top250/top250.html",name:"top",controller:"topCtrl"}),e.otherwise("/in_theaters/1")}]),angular.module("service",[]).service("myService",function(){this.myJsonp=function(t,e,o){var a="myJsonp_"+Math.random().toString().replace(".","");window[a]=o;var n="";for(var r in e)n+=r+"="+e[r]+"&";var c=document.createElement("script");c.src=t+"?"+n+"callback="+a,c.onload=function(){document.body.removeChild(c)},document.body.appendChild(c)}}),angular.module("comming_soon",[]).controller("comming_soonCtrl",["$scope","myService","$stateParams","$location",function(t,e,o,a){var n=o.page,r=9*(n-1),c=0;e.myJsonp("https://api.douban.com/v2/movie/coming_soon",{count:9,start:r},function(e){t.result=e,c=Math.ceil(e.total/9),t.$apply()}),t.changePage=function(t){"next"==t?++n>c&&(n=c):"prev"==t&&--n<1&&(n=1),a.path("/comming_soon/"+n)}}]),angular.module("in_theaters",[]).controller("in_theatersCtrl",["$scope","myService","$stateParams","$location",function(t,e,o,a){var n=o.page,r=9*(n-1),c=0;e.myJsonp("https://api.douban.com/v2/movie/in_theaters",{count:9,start:r},function(e){t.result=e,c=Math.ceil(e.total/9),t.$apply()}),t.changePage=function(t){"next"==t?++n>c&&(n=c):"prev"==t&&--n<1&&(n=1),a.path("/in_theaters/"+n)}}]),angular.module("search",[]).controller("searchCtrl",["$scope","myService","$stateParams","$location",function(t,e,o,a){var n=o.searchInfo,r=o.page,c=9*(r-1),l=0;e.myJsonp("https://api.douban.com/v2/movie/search",{q:n,count:9,start:c},function(e){t.result=e,l=Math.ceil(e.total/9),t.$apply()}),t.changePage=function(t){"next"==t?++r>l&&(r=l):"prev"==t&&--r<1&&(r=1),a.path("/search/"+r+"/searchInfo")}}]),angular.module("top",[]).controller("topCtrl",["$scope","myService","$stateParams","$location",function(t,e,o,a){var n=o.page,r=9*(n-1),c=0;e.myJsonp("https://api.douban.com/v2/movie/top250",{count:9,start:r},function(e){t.result=e,c=Math.ceil(e.total/9),t.$apply()}),t.changePage=function(t){"next"==t?++n>c&&(n=c):"prev"==t&&--n<1&&(n=1),a.path("/top/"+n)}}]);